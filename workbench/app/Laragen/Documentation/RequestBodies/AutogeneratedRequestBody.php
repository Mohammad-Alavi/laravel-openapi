<?php

namespace Workbench\App\Laragen\Documentation\RequestBodies;

use Illuminate\Support\Facades\Route;
use MohammadAlavi\Laragen\Laragen;
use MohammadAlavi\ObjectOrientedOpenAPI\Contracts\Abstract\Factories\Components\RequestBodyFactory;
use MohammadAlavi\ObjectOrientedOpenAPI\Schema\Objects\MediaType\MediaType;
use MohammadAlavi\ObjectOrientedOpenAPI\Schema\Objects\RequestBody\RequestBody;
use MohammadAlavi\ObjectOrientedOpenAPI\Support\SharedFields\Content\ContentEntry;

final class AutogeneratedRequestBody extends RequestBodyFactory
{
    public function component(): RequestBody
    {
        return RequestBody::create()
            ->description('Create User Request Body')
            ->content(
                ContentEntry::json(
                    MediaType::create()
                        ->schema(
                            Laragen::getBodyParameters(
                                Route::getRoutes()->getByName('autogen.request-body'),
                            ),
                        ),
                ),
            );
    }
}
